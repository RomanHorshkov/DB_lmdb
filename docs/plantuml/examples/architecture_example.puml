@startuml
!include ../base.puml

title LMDB packages (PlantUML example)

package "Public surface" {
  component "db_lmdb.h" <<public>> as api
  component "db.h" <<public>> as db
  component "dbi.h" <<public>> as dbi_h
}

package "Core" {
  component "db_lmdb_core.c" as core
  component "db_lmdb_dbi.c" as dbi
}

package "Ops" {
  component "db_lmdb_ops.c" as ops
  component "void_store.c" <<internal>> as void_store
}

component "internal.h / config.h" <<internal>> as internal
component "LMDB C API" as lmdb
component "EMlog" as emlog

api --> core
api --> db
db --> dbi_h
dbi_h --> dbi
core --> dbi
dbi --> ops
ops --> void_store

core --> internal
dbi --> internal
ops --> internal
internal --> lmdb
internal --> emlog

note right of db
Exposes dbi.h so callers can
use dbi_desc_t alongside DB.
end note

@enduml
