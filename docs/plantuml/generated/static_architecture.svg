<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="544px" preserveAspectRatio="none" style="width:976px;height:544px;" version="1.1" viewBox="0 0 976 544" width="976px" zoomAndPan="magnify"><defs><filter height="300%" id="f2wne8a8hv5ix" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="495" x="244" y="16.708">LMDB Wrapper — Packages (Core / Ops / DB / Security)</text><!--MD5=[2c2e2644034c00788261e03c85b06837]
cluster Core--><polygon fill="#FFFFFF" filter="url(#f2wne8a8hv5ix)" points="22,109.4531,66,109.4531,73,131.75,322,131.75,322,480.9531,22,480.9531,22,109.4531" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="22" x2="73" y1="131.75" y2="131.75"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="26" y="124.4482">Core</text><!--MD5=[3a5f76864f9108a990fa16e00ab13457]
cluster Ops--><polygon fill="#FFFFFF" filter="url(#f2wne8a8hv5ix)" points="46,222.9531,83,222.9531,90,245.25,298,245.25,298,456.9531,46,456.9531,46,222.9531" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="46" x2="90" y1="245.25" y2="245.25"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="31" x="50" y="237.9482">Ops</text><!--MD5=[e169ac431914a6adb8cf110c9da1459f]
cluster DB--><polygon fill="#FFFFFF" filter="url(#f2wne8a8hv5ix)" points="70,345.9531,97,345.9531,104,368.25,144,368.25,144,432.9531,70,432.9531,70,345.9531" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="70" x2="104" y1="368.25" y2="368.25"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="21" x="74" y="360.9482">DB</text><!--MD5=[109515bbac35f821417e1764695b17cb]
cluster Security--><polygon fill="#FFFFFF" filter="url(#f2wne8a8hv5ix)" points="168,345.9531,239,345.9531,246,368.25,274,368.25,274,432.9531,168,432.9531,168,345.9531" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="168" x2="246" y1="368.25" y2="368.25"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="65" x="172" y="360.9482">Security</text><!--MD5=[0d482ad21d5c7c11aa976e45da5ecfe6]
entity core--><rect fill="#FEFECE" filter="url(#f2wne8a8hv5ix)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="53" x="232.5" y="144.4531"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="227.5" y="149.4531"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="227.5" y="170.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="33" x="242.5" y="167.4482">Core</text><!--MD5=[5a9f12e3433feb7a47fb7cbcc8ee5d5d]
entity ops--><rect fill="#FEFECE" filter="url(#f2wne8a8hv5ix)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="48" x="215" y="257.9531"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="210" y="262.9531"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="210" y="284.25"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="28" x="225" y="280.9482">Ops</text><!--MD5=[7468467f3b6b392f1d176d828c753b77]
entity db--><rect fill="#FEFECE" filter="url(#f2wne8a8hv5ix)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="41" x="86.5" y="380.9531"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="81.5" y="385.9531"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="81.5" y="407.25"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="21" x="96.5" y="403.9482">DB</text><!--MD5=[25fdbc256ceb9e3bdcb330150c9533c0]
entity sec--><rect fill="#FEFECE" filter="url(#f2wne8a8hv5ix)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="75" x="183.5" y="380.9531"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="178.5" y="385.9531"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="178.5" y="407.25"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="55" x="193.5" y="403.9482">Security</text><!--MD5=[2b33d9edc820bacf95df57a8f964e5dc]
entity lmdb--><rect fill="#FEFECE" filter="url(#f2wne8a8hv5ix)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="99" x="114.5" y="496.9531"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="109.5" y="501.9531"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="109.5" y="523.25"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="79" x="124.5" y="519.9482">LMDB C API</text><!--MD5=[d60f7c64bf1ce40dcccfba60774db125]
entity emlog--><rect fill="#FEFECE" filter="url(#f2wne8a8hv5ix)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="62" x="338" y="257.9531"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="333" y="262.9531"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="333" y="284.25"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="348" y="280.9482">EMlog</text><path d="M114.5,29.4531 L114.5,84.8516 A0,0 0 0 0 114.5,84.8516 L255,84.8516 L259,144.3031 L263,84.8516 L403.5,84.8516 A0,0 0 0 0 403.5,84.8516 L403.5,39.4531 L393.5,29.4531 L114.5,29.4531 A0,0 0 0 0 114.5,29.4531 " fill="#FBFB77" filter="url(#f2wne8a8hv5ix)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M393.5,29.4531 L393.5,39.4531 L403.5,39.4531 L393.5,29.4531 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="34" x="120.5" y="46.52">Core:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="210" x="120.5" y="61.6528">- public facade and orchestration</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="268" x="120.5" y="76.7856">- owns init / add_op / exec_ops / shutdown</text><path d="M435.5,240.4531 L435.5,310.9844 L630.5,310.9844 L630.5,250.4531 L620.5,240.4531 L435.5,240.4531 " fill="#FBFB77" filter="url(#f2wne8a8hv5ix)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M620.5,240.4531 L620.5,250.4531 L630.5,250.4531 L620.5,240.4531 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="29" x="441.5" y="257.52">Ops:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="113" x="441.5" y="272.6528">- env + DBI setup</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="441.5" y="287.7856">- transaction helpers</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="174" x="441.5" y="302.9185">- batched LMDB operations</text><path d="M338,371.4531 L338,426.8516 L602,426.8516 L602,381.4531 L592,371.4531 L338,371.4531 " fill="#FBFB77" filter="url(#f2wne8a8hv5ix)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M592,371.4531 L592,381.4531 L602,381.4531 L592,371.4531 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="23" x="344" y="388.52">DB:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="213" x="344" y="403.6528">- DataBase_t and DBI descriptors</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="243" x="344" y="418.7856">- hides raw LMDB handles from callers</text><path d="M637.5,371.4531 L637.5,426.8516 L964.5,426.8516 L964.5,381.4531 L954.5,371.4531 L637.5,371.4531 " fill="#FBFB77" filter="url(#f2wne8a8hv5ix)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M954.5,371.4531 L954.5,381.4531 L964.5,381.4531 L954.5,371.4531 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="56" x="643.5" y="388.52">Security:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="643.5" y="403.6528">- LMDB rc → safety policy</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="306" x="643.5" y="418.7856">- central errno mapping and mapsize expansion</text><!--MD5=[ccd66224e0e50ee081bacd31087f5bef]
link core to ops--><path d="M255.88,180.8731 C252.41,200.1831 246.81,231.3831 243.03,252.5131 " fill="none" id="core-&gt;ops" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="242.1,257.6531,247.6288,249.5025,242.9844,252.732,239.755,248.0875,242.1,257.6531" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[29930ae0ccb48ea3733796c1004e78c7]
link ops to db--><path d="M218.17,294.2131 C203.85,306.2331 184.51,322.7731 168,337.9531 C154.25,350.6031 139.28,365.3031 127.62,376.9931 " fill="none" id="ops-&gt;db" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="123.79,380.8331,132.9752,377.279,127.3184,377.2905,127.307,371.6336,123.79,380.8331" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[157f2c83c2fe6afc7ea5f1c634c00083]
link ops to sec--><path d="M236.46,294.0331 C233.29,315.3531 227.86,351.8731 224.35,375.4531 " fill="none" id="ops-&gt;sec" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="223.59,380.5731,228.8832,372.2676,224.3331,375.6287,220.972,371.0786,223.59,380.5731" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[d67a83a8789680248b318c9bffbf5460]
link db to lmdb--><path d="M115.66,417.2631 C125.68,437.3031 142.19,470.3231 153.08,492.1131 " fill="none" id="db-&gt;lmdb" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="155.45,496.8531,154.9902,487.015,153.2082,492.3838,147.8394,490.6018,155.45,496.8531" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[d6618c532fb8fe0276e83c19d3dc4bb3]
link sec to lmdb--><path d="M212.34,417.2631 C202.32,437.3031 185.81,470.3231 174.92,492.1131 " fill="none" id="sec-&gt;lmdb" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="172.55,496.8531,180.1606,490.6018,174.7918,492.3838,173.0098,487.015,172.55,496.8531" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[a9f3ea2cadc8e05e42e6af19716349c0]
link core to emlog--><path d="M276.19,180.8731 C295.64,200.5931 327.33,232.7131 348.17,253.8431 " fill="none" id="core-&gt;emlog" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="351.93,257.6531,348.4502,248.4395,348.416,254.0962,342.7592,254.0619,351.93,257.6531" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[c9f46aefd8048937816a9521ca053c00]
link ops to GMN22--><path d="M254.79,257.8131 C272.8,238.6431 304.23,209.5631 338.5,197.7031 C391.81,179.2531 451.87,211.8331 490.96,240.4031 " fill="none" id="ops-GMN22" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><!--MD5=[47c840107c44f31df946842012c0dcb2]
link db to GMN25--><path d="M118.83,380.8731 C132.32,362.2131 156.34,334.5031 185.5,324.7031 C268.73,296.7531 368.55,339.8731 425.09,371.1831 " fill="none" id="db-GMN25" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><!--MD5=[14631a8063210318e82b185c1a341ff8]
link sec to GMN28--><path d="M241.7,380.6731 C263.87,362.4231 300.95,335.5731 338.5,324.7031 C394.85,308.3931 544.77,314.2631 602.5,324.7031 C651.92,333.6431 705.07,354.1631 743.93,371.3631 " fill="none" id="sec-GMN28" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><!--MD5=[105e866944effe564d36adce40a7d090]
@startuml

title LMDB Wrapper — Packages (Core / Ops / DB / Security)

skinparam backgroundColor transparent

package "Core" {
  component "Core" as core

  package "Ops" {
    component "Ops" as ops

    package "DB" {
      component "DB" as db
    }

    package "Security" {
      component "Security" as sec
    }
  }
}

component "LMDB C API" as lmdb
component "EMlog" as emlog

core - -> ops
ops - -> db
ops - -> sec
db - -> lmdb
sec - -> lmdb
core - -> emlog

note top of core
Core:
- public facade and orchestration
- owns init / add_op / exec_ops / shutdown
end note

note right of ops
Ops:
- env + DBI setup
- transaction helpers
- batched LMDB operations
end note

note right of db
DB:
- DataBase_t and DBI descriptors
- hides raw LMDB handles from callers
end note

note right of sec
Security:
- LMDB rc → safety policy
- central errno mapping and mapsize expansion
end note

@enduml

PlantUML version 1.2020.02(Sun Mar 01 11:22:07 CET 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 21.0.8+9-Ubuntu-0ubuntu124.04.1
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>