<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="650px" preserveAspectRatio="none" style="width:1215px;height:650px;" version="1.1" viewBox="0 0 1215 650" width="1215px" zoomAndPan="magnify"><defs><filter height="300%" id="f193jj9lxdxbbu" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="495" x="363.5" y="16.708">LMDB Wrapper — Packages (Core / Ops / DB / Security)</text><!--MD5=[2c2e2644034c00788261e03c85b06837]
cluster Core--><polygon fill="#FFFFFF" filter="url(#f193jj9lxdxbbu)" points="22,44.9531,66,44.9531,73,67.25,1126,67.25,1126,586.9531,22,586.9531,22,44.9531" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="22" x2="73" y1="67.25" y2="67.25"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="26" y="59.9482">Core</text><!--MD5=[3a5f76864f9108a990fa16e00ab13457]
cluster Ops--><polygon fill="#FFFFFF" filter="url(#f193jj9lxdxbbu)" points="54,254.9531,91,254.9531,98,277.25,1094,277.25,1094,554.9531,54,554.9531,54,254.9531" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="54" x2="98" y1="277.25" y2="277.25"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="31" x="58" y="269.9482">Ops</text><!--MD5=[e169ac431914a6adb8cf110c9da1459f]
cluster DB--><polygon fill="#FFFFFF" filter="url(#f193jj9lxdxbbu)" points="102,392.9531,129,392.9531,136,415.25,510,415.25,510,514.9531,102,514.9531,102,392.9531" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="102" x2="136" y1="415.25" y2="415.25"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="21" x="106" y="407.9482">DB</text><!--MD5=[109515bbac35f821417e1764695b17cb]
cluster Security--><polygon fill="#FFFFFF" filter="url(#f193jj9lxdxbbu)" points="550,392.9531,621,392.9531,628,415.25,1054,415.25,1054,514.9531,550,514.9531,550,392.9531" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="550" x2="628" y1="415.25" y2="415.25"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="65" x="554" y="407.9482">Security</text><!--MD5=[0d482ad21d5c7c11aa976e45da5ecfe6]
entity core--><rect fill="#FEFECE" filter="url(#f193jj9lxdxbbu)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="53" x="547.5" y="194.9531"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="542.5" y="199.9531"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="542.5" y="221.25"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="33" x="557.5" y="217.9482">Core</text><path d="M429.5,79.9531 L429.5,135.3516 A0,0 0 0 0 429.5,135.3516 L570,135.3516 L574,194.8031 L578,135.3516 L718.5,135.3516 A0,0 0 0 0 718.5,135.3516 L718.5,89.9531 L708.5,79.9531 L429.5,79.9531 A0,0 0 0 0 429.5,79.9531 " fill="#FBFB77" filter="url(#f193jj9lxdxbbu)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M708.5,79.9531 L708.5,89.9531 L718.5,89.9531 L708.5,79.9531 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="34" x="435.5" y="97.02">Core:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="210" x="435.5" y="112.1528">- public facade and orchestration</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="268" x="435.5" y="127.2856">- owns init / add_op / exec_ops / shutdown</text><!--MD5=[5a9f12e3433feb7a47fb7cbcc8ee5d5d]
entity ops--><rect fill="#FEFECE" filter="url(#f193jj9lxdxbbu)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="48" x="315" y="315.4531"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="310" y="320.4531"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="310" y="341.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="28" x="325" y="338.4482">Ops</text><path d="M398.5,297.9531 L398.5,329.4531 L363.22,333.4531 L398.5,337.4531 L398.5,368.4844 A0,0 0 0 0 398.5,368.4844 L593.5,368.4844 A0,0 0 0 0 593.5,368.4844 L593.5,307.9531 L583.5,297.9531 L398.5,297.9531 A0,0 0 0 0 398.5,297.9531 " fill="#FBFB77" filter="url(#f193jj9lxdxbbu)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M583.5,297.9531 L583.5,307.9531 L593.5,307.9531 L583.5,297.9531 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="29" x="404.5" y="315.02">Ops:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="113" x="404.5" y="330.1528">- env + DBI setup</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="404.5" y="345.2856">- transaction helpers</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="174" x="404.5" y="360.4185">- batched LMDB operations</text><!--MD5=[7468467f3b6b392f1d176d828c753b77]
entity db--><rect fill="#FEFECE" filter="url(#f193jj9lxdxbbu)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="41" x="145.5" y="445.4531"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="140.5" y="450.4531"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="140.5" y="471.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="21" x="155.5" y="468.4482">DB</text><path d="M222,435.9531 L222,459.4531 L186.56,463.4531 L222,467.4531 L222,491.3516 A0,0 0 0 0 222,491.3516 L486,491.3516 A0,0 0 0 0 486,491.3516 L486,445.9531 L476,435.9531 L222,435.9531 A0,0 0 0 0 222,435.9531 " fill="#FBFB77" filter="url(#f193jj9lxdxbbu)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M476,435.9531 L476,445.9531 L486,445.9531 L476,435.9531 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="23" x="228" y="453.02">DB:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="213" x="228" y="468.1528">- DataBase_t and DBI descriptors</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="243" x="228" y="483.2856">- hides raw LMDB handles from callers</text><!--MD5=[25fdbc256ceb9e3bdcb330150c9533c0]
entity sec--><rect fill="#FEFECE" filter="url(#f193jj9lxdxbbu)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="75" x="593.5" y="445.4531"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="588.5" y="450.4531"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="588.5" y="471.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="55" x="603.5" y="468.4482">Security</text><path d="M703.5,435.9531 L703.5,459.4531 L668.8,463.4531 L703.5,467.4531 L703.5,491.3516 A0,0 0 0 0 703.5,491.3516 L1030.5,491.3516 A0,0 0 0 0 1030.5,491.3516 L1030.5,445.9531 L1020.5,435.9531 L703.5,435.9531 A0,0 0 0 0 703.5,435.9531 " fill="#FBFB77" filter="url(#f193jj9lxdxbbu)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1020.5,435.9531 L1020.5,445.9531 L1030.5,445.9531 L1020.5,435.9531 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="56" x="709.5" y="453.02">Security:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="709.5" y="468.1528">- LMDB rc → safety policy</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="306" x="709.5" y="483.2856">- central errno mapping and mapsize expansion</text><!--MD5=[2b33d9edc820bacf95df57a8f964e5dc]
entity lmdb--><rect fill="#FEFECE" filter="url(#f193jj9lxdxbbu)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="99" x="348.5" y="602.9531"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="343.5" y="607.9531"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="343.5" y="629.25"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="79" x="358.5" y="625.9482">LMDB C API</text><!--MD5=[d60f7c64bf1ce40dcccfba60774db125]
entity emlog--><rect fill="#FEFECE" filter="url(#f193jj9lxdxbbu)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="62" x="1142" y="315.4531"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="1137" y="320.4531"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="1137" y="341.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="1152" y="338.4482">EMlog</text><!--MD5=[418748885afc3420c20ed8e6ca49433c]
link core to Ops--><path d="M547.24,214.3131 C445.46,215.8131 87.3,222.2631 70,238.9531 C66.3063,242.5169 63.4003,246.6192 61.1442,251.0737 C60.5802,252.1873 60.0568,253.3229 59.5719,254.4776 C59.5113,254.6219 59.4512,254.7666 59.3918,254.9115 " fill="none" id="core-&gt;Ops" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="59.3918,254.9115,66.507,248.1016,61.2886,250.2852,59.1049,245.0668,59.3918,254.9115" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[398ca093baaba2a929129204c52b2f90]
link ops to DB--><path d="M329.46,351.5931 C324.81,358.2331 318.58,365.1331 311,368.9531 C292.92,378.0531 144.51,363.9431 129,376.9531 C125.33,380.0319 122.2755,383.6475 119.7405,387.6213 C119.1068,388.6147 118.5055,389.6305 117.9352,390.666 C117.6501,391.1837 117.3727,391.7063 117.1028,392.2334 C117.0354,392.3652 116.9684,392.4973 116.9018,392.6296 " fill="none" id="ops-&gt;DB" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="116.9018,392.6296,124.5175,386.3845,119.1472,388.1622,117.3695,382.7919,116.9018,392.6296" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[8b7ff277c405885c14d5c37e46f74051]
link ops to Security--><path d="M354.98,351.5931 C362.24,358.2231 371.35,365.1331 381,368.9531 C406.06,378.8731 478.73,363.3631 502,376.9531 C521.31,388.2281 535.1775,409.1156 544.2825,427.4219 C545.4206,429.7102 546.4843,431.9581 547.475,434.1419 C547.9703,435.2338 548.4473,436.3097 548.9063,437.3665 C549.1357,437.8949 549.3607,438.4186 549.5811,438.9372 C549.6913,439.1964 549.8004,439.4544 549.9084,439.7111 " fill="none" id="ops-&gt;Security" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="549.9084,439.7111,550.1057,429.8642,547.9696,435.1023,542.7316,432.9662,549.9084,439.7111" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[d67a83a8789680248b318c9bffbf5460]
link db to lmdb--><path d="M165.63,481.5431 C166.03,509.8831 171.31,566.3131 205,594.9531 C225.28,612.1931 293.73,617.6831 343.36,619.3531 " fill="none" id="db-&gt;lmdb" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="348.4,619.5131,339.5301,615.2324,343.4025,619.3561,339.2788,623.2284,348.4,619.5131" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[d6618c532fb8fe0276e83c19d3dc4bb3]
link sec to lmdb--><path d="M631.09,481.5631 C630.22,509.9331 624.02,566.4131 590,594.9531 C569.77,611.9231 502.06,617.4831 452.76,619.2431 " fill="none" id="sec-&gt;lmdb" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="447.75,619.4131,456.8818,623.1024,452.7471,619.2418,456.6077,615.1071,447.75,619.4131" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[a9f3ea2cadc8e05e42e6af19716349c0]
link core to emlog--><path d="M600.56,214.0831 C699.32,214.7331 1041.87,218.4431 1086,238.9531 C1118.99,254.2831 1145.43,288.3631 1160.16,310.8731 " fill="none" id="core-&gt;emlog" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1162.95,315.2031,1161.4396,305.4708,1160.2426,310.9995,1154.7138,309.8026,1162.95,315.2031" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[431cea1fbd80af82f8ab8cf5c8f5cbc8]
@startuml

title LMDB Wrapper — Packages (Core / Ops / DB / Security)

skinparam backgroundColor transparent

package "Core" {
  component "Core" as core
    note top of core
    Core:
    - public facade and orchestration
    - owns init / add_op / exec_ops / shutdown
    end note

  package "Ops" {
    component "Ops" as ops
      note right of ops
      Ops:
      - env + DBI setup
      - transaction helpers
      - batched LMDB operations
      end note

    package "DB" {
      component "DB" as db
        note right of db
        DB:
        - DataBase_t and DBI descriptors
        - hides raw LMDB handles from callers
        end note
    }

    package "Security" {
      component "Security" as sec
        note right of sec
        Security:
        - LMDB rc → safety policy
        - central errno mapping and mapsize expansion
        end note
    }
  }
}

component "LMDB C API" as lmdb
component "EMlog" as emlog

core - -> Ops
ops - -> DB
ops - -> Security
db - -> lmdb
sec - -> lmdb
core - -> emlog

@enduml

PlantUML version 1.2020.02(Sun Mar 01 11:22:07 CET 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 21.0.8+9-Ubuntu-0ubuntu124.04.1
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>