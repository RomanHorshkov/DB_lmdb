<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="519px" preserveAspectRatio="none" style="width:915px;height:519px;" version="1.1" viewBox="0 0 915 519" width="915px" zoomAndPan="magnify"><defs><filter height="300%" id="fm2haaqt48qgp" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="318" x="308.5" y="16.708">Ops package — facade and internals</text><!--MD5=[6497a5f20f40ef595dbdbef8cd5f74a8]
cluster Ops facade--><polygon fill="#FFFFFF" filter="url(#fm2haaqt48qgp)" points="245,44.9531,340,44.9531,347,67.25,389,67.25,389,148.9531,245,148.9531,245,44.9531" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="245" x2="347" y1="67.25" y2="67.25"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="89" x="249" y="59.9482">Ops facade</text><!--MD5=[8beb8a340093e2689cefd88e8b35d5d6]
cluster ops_pack--><polygon fill="#FFFFFF" filter="url(#fm2haaqt48qgp)" points="100,180.9531,211,180.9531,218,203.25,555,203.25,555,415.9531,100,415.9531,100,180.9531" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="100" x2="218" y1="203.25" y2="203.25"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="105" x="104" y="195.9482">Ops internals</text><!--MD5=[c1658959ae7efea6f1f166ee65b2b4aa]
cluster security--><polygon fill="#FFFFFF" filter="url(#fm2haaqt48qgp)" points="595,301.4531,737,301.4531,744,323.75,893,323.75,893,408.4531,595,408.4531,595,301.4531" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="595" x2="744" y1="323.75" y2="323.75"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="136" x="599" y="316.4482">Security Package</text><!--MD5=[a9e6c90a9350f810234a83da26be5185]
entity ops_fac--><rect fill="#FEFECE" filter="url(#fm2haaqt48qgp)" height="52.5938" style="stroke: #A80036; stroke-width: 1.5;" width="112" x="261" y="79.9531"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="256" y="84.9531"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="256" y="122.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="69" x="282.5" y="102.9482">«internal»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="92" x="271" y="119.2451">ops_facade.h</text><!--MD5=[db7752dc4fbf04f87c21f27e278233ac]
entity ops_int--><rect fill="#FEFECE" filter="url(#fm2haaqt48qgp)" height="52.5938" style="stroke: #A80036; stroke-width: 1.5;" width="125" x="124.5" y="337.9531"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="119.5" y="342.9531"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="119.5" y="380.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="69" x="152.5" y="360.9482">«internal»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="105" x="134.5" y="377.2451">ops_internals.h</text><!--MD5=[4aaae6a0e83fd1e7a9d0ecf3b909539d]
entity ops_init_h--><rect fill="#FEFECE" filter="url(#fm2haaqt48qgp)" height="52.5938" style="stroke: #A80036; stroke-width: 1.5;" width="89" x="410.5" y="223.9531"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="405.5" y="228.9531"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="405.5" y="266.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="69" x="420.5" y="246.9482">«internal»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="66" x="422" y="263.2451">ops_init.h</text><!--MD5=[8579668cbc77193e5979ff151ad5f3fb]
entity ops_act_h--><rect fill="#FEFECE" filter="url(#fm2haaqt48qgp)" height="52.5938" style="stroke: #A80036; stroke-width: 1.5;" width="116" x="259" y="223.9531"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="254" y="228.9531"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="254" y="266.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="69" x="282.5" y="246.9482">«internal»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="96" x="269" y="263.2451">ops_actions.h</text><!--MD5=[cb7d1db63af2f33605530f508dd1f61c]
entity ops_exec_h--><rect fill="#FEFECE" filter="url(#fm2haaqt48qgp)" height="52.5938" style="stroke: #A80036; stroke-width: 1.5;" width="99" x="124.5" y="223.9531"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="119.5" y="228.9531"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="119.5" y="266.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="69" x="139.5" y="246.9482">«internal»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="79" x="134.5" y="263.2451">ops_exec.h</text><path d="M285,336.9531 L285,392.3516 L523,392.3516 L523,346.9531 L513,336.9531 L285,336.9531 " fill="#FBFB77" filter="url(#fm2haaqt48qgp)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M513,336.9531 L513,346.9531 L523,346.9531 L513,336.9531 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="189" x="291" y="354.02">Private op_t / op_key_t wiring.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="189" x="291" y="369.1528">Only ops_init.h, ops_actions.h</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="217" x="291" y="384.2856">and ops_exec.h should touch this.</text><path d="M638.5,344.4531 L638.5,384.7188 L869.5,384.7188 L869.5,354.4531 L859.5,344.4531 L638.5,344.4531 " fill="#FBFB77" filter="url(#fm2haaqt48qgp)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M859.5,344.4531 L859.5,354.4531 L869.5,354.4531 L859.5,344.4531 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="195" x="644.5" y="361.52">Central safety policy and errno</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="210" x="644.5" y="376.6528">mapping used by all ops helpers.</text><!--MD5=[7468467f3b6b392f1d176d828c753b77]
entity db--><polygon fill="#FFFFFF" filter="url(#fm2haaqt48qgp)" points="126,451.9531,152,451.9531,159,474.25,248,474.25,248,507.5469,126,507.5469,126,451.9531" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="126" x2="159" y1="474.25" y2="474.25"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="20" x="130" y="467.9482">db</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="92" x="136" y="494.2451">DB package</text><path d="M6,55.9531 L6,156.75 A0,0 0 0 0 6,156.75 L226,156.75 A0,0 0 0 0 226,156.75 L226,110.4531 L260.68,106.4531 L226,102.4531 L226,65.9531 L216,55.9531 L6,55.9531 A0,0 0 0 0 6,55.9531 " fill="#FBFB77" filter="url(#fm2haaqt48qgp)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M216,55.9531 L216,65.9531 L226,65.9531 L216,55.9531 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="163" x="12" y="73.02">Facade for the core layer.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="57" x="12" y="88.1528">Exposes:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="199" x="12" y="103.2856">- op_type_t (DB_OPERATION_*)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="177" x="12" y="118.4185">- high-level helpers in ops_*</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="182" x="12" y="133.5513">Core should only include this</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="12" y="148.6841">from the ops package.</text><!--MD5=[21d2a0c47aff13458a47d4b5cdfc32c1]
link ops_int to GMN71--><path d="M249.73,364.4531 C261.48,364.4531 273.23,364.4531 284.98,364.4531 " fill="none" id="ops_int-GMN71" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><!--MD5=[a0061fc3a4ac2a3cde062b8022587f19]
link GMN75 to GMN71--><path d="M733.56,344.0731 C708.65,321.2731 664.08,286.7731 617.5,281.2031 C552.72,273.4531 483.32,309.7931 441.8,336.9231 " fill="none" id="GMN75-GMN71" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><!--MD5=[4b809b9f961174a073120089527ec23d]
link ops_fac to ops_init_h--><path d="M355.5,133.2131 C368.1,142.4931 381.74,153.5231 393,164.9531 C409.37,181.5631 424.88,202.7131 436.3,219.7031 " fill="none" id="ops_fac-&gt;ops_init_h" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="439.11,223.9231,437.4613,214.2133,436.3431,219.7585,430.7978,218.6403,439.11,223.9231" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[a8037350994202e94cb2125bf55c01c3]
link ops_fac to ops_act_h--><path d="M317,133.1731 C317,157.1931 317,193.0931 317,218.6431 " fill="none" id="ops_fac-&gt;ops_act_h" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="317,223.9331,321,214.9331,317,218.9331,313,214.9331,317,223.9331" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[ec3d528173265bc12e126a6bfa346a42]
link ops_fac to ops_exec_h--><path d="M280.09,133.0031 C267.47,142.4331 253.62,153.6031 242,164.9531 C224.86,181.6931 207.96,202.6631 195.3,219.5231 " fill="none" id="ops_fac-&gt;ops_exec_h" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="192.17,223.7131,200.7507,218.8788,195.154,219.7012,194.3316,214.1044,192.17,223.7131" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[cf433cf5a9970558ffe9040ee2810cf8]
link ops_init_h to ops_int--><path d="M410.18,271.8531 C404.49,273.8531 398.67,275.6331 393,276.9531 C365.89,283.2731 293.45,274.1731 268,285.4531 C244.27,295.9731 223.34,316.6031 208.71,334.0031 " fill="none" id="ops_init_h-&gt;ops_int" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="205.5,337.8931,214.3154,333.5012,208.684,334.038,208.1472,328.4067,205.5,337.8931" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[3a880d1ded8694850ef8d7e5068d4fd1]
link ops_act_h to ops_int--><path d="M278.83,277.0331 C275.11,279.7931 271.44,282.6331 268,285.4531 C249.63,300.5131 230.42,318.8831 215.32,334.0031 " fill="none" id="ops_act_h-&gt;ops_int" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="211.57,337.7831,220.7552,334.229,215.0984,334.2405,215.087,328.5836,211.57,337.7831" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[9310b3a2692f0c88629971f7fcedc6d6]
link ops_exec_h to ops_int--><path d="M176.98,277.1531 C178.9,293.6531 181.4,315.1831 183.42,332.6131 " fill="none" id="ops_exec_h-&gt;ops_int" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="184.03,337.8731,186.973,328.4743,183.4574,332.906,179.0257,329.3904,184.03,337.8731" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[b7456a17eb24a46ef8b46f02358ea41a]
link ops_pack to security--><path d="M555.0643,267.5805 C555.1414,267.7346 555.2189,267.8897 555.2968,268.0455 C555.6085,268.6689 555.9269,269.3055 556.2514,269.9545 C561.4441,280.3391 568.2281,293.9063 575.0113,307.4719 C581.7944,321.0375 588.5766,334.6016 593.7655,344.9798 C594.0898,345.6285 594.4079,346.2647 594.7193,346.8877 C594.7972,347.0434 594.8747,347.1983 594.9517,347.3524 " fill="none" id="ops_pack-&gt;security" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="594.9517,347.3524,594.5047,337.5137,592.7157,342.8802,587.3492,341.0912,594.9517,347.3524" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[59fb338fdf78cbf4b62fb90c15e6e5f2]
link ops_int to db--><path d="M187,391.2031 C187,407.5631 187,428.8831 187,446.4131 " fill="none" id="ops_int-&gt;db" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="187,451.7131,191,442.7131,187,446.7131,183,442.7131,187,451.7131" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[8a9f5557127d86efe1ae86d9ee70f5ea]
@startuml

title Ops package — facade and internals

package "Ops facade" {
  component "ops_facade.h" <<internal>> as ops_fac
}

note left of ops_fac
Facade for the core layer.
Exposes:
- op_type_t (DB_OPERATION_*)
- high-level helpers in ops_*
Core should only include this
from the ops package.
end note

package "Ops internals" as ops_pack {
  component "ops_internals.h" <<internal>> as ops_int
  component "ops_init.h" <<internal>> as ops_init_h
  component "ops_actions.h" <<internal>> as ops_act_h
  component "ops_exec.h" <<internal>> as ops_exec_h
    note right of ops_int
    Private op_t / op_key_t wiring.
    Only ops_init.h, ops_actions.h
    and ops_exec.h should touch this.
    end note
}


package "Security Package" as security {
note top
Central safety policy and errno
mapping used by all ops helpers.
end note
}


package "DB package" as db {
}

ops_fac - -> ops_init_h
ops_fac - -> ops_act_h
ops_fac - -> ops_exec_h

ops_init_h - -> ops_int
ops_act_h - -> ops_int
ops_exec_h - -> ops_int

ops_pack - -> security
ops_int - -> db

@enduml

PlantUML version 1.2020.02(Sun Mar 01 11:22:07 CET 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 21.0.8+9-Ubuntu-0ubuntu124.04.1
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>